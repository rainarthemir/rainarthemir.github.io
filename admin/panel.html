<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="panel-container">
  <button id="logoutBtn">Выйти</button>
  <h1>Панель проектов</h1>

  <form id="addProjectForm">
    <input type="text" name="title" placeholder="Название проекта" required>
    <input type="url" name="url" placeholder="URL проекта" required>
    <input type="color" name="color" value="#0078d4">
    <button type="submit">Добавить проект</button>
  </form>

  <div id="projects" class="projects"></div>
</div>

<script>
// Проверка авторизации
if (localStorage.getItem("loggedIn") !== "true") {
  window.location.href = "login.html";
}

// Logout
document.getElementById("logoutBtn").onclick = () => {
  localStorage.removeItem("loggedIn");
  window.location.href = "login.html";
};

// Добавление проектов
const form = document.getElementById("addProjectForm");
const projectsDiv = document.getElementById("projects");

// Загружаем проекты из localStorage
let projects = JSON.parse(localStorage.getItem("projects") || "[]");
renderProjects();

form.onsubmit = (e) => {
  e.preventDefault();
  const title = form.title.value;
  const url = form.url.value;
  const color = form.color.value;

  projects.push({ title, url, color });
  localStorage.setItem("projects", JSON.stringify(projects));
  renderProjects();
  form.reset();
};

function renderProjects() {
  projectsDiv.innerHTML = "";
  projects.forEach(p => {
    const a = document.createElement("a");
    a.href = p.url;
    a.target = "_blank";
    a.textContent = p.title;
    a.style.backgroundColor = p.color;
    a.className = "project-button";
    projectsDiv.appendChild(a);
  });
}
</script>
</body>
</html>
